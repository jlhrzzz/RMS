{"version":3,"sources":["webpack:///./src/views/Nodata.vue?9fc4","webpack:///./node_modules/core-js/modules/web.dom-collections.for-each.js","webpack:///./node_modules/core-js/internals/array-for-each.js","webpack:///./src/views/order/Ordered.vue?7543","webpack:///src/views/order/Ordered.vue","webpack:///./src/views/order/Ordered.vue?50c0","webpack:///./src/views/order/Ordered.vue","webpack:///./src/views/Nodata.vue?1422","webpack:///src/views/Nodata.vue","webpack:///./src/views/Nodata.vue?bb5d","webpack:///./src/views/Nodata.vue","webpack:///./src/views/order/Ordered.vue?95d0"],"names":["global","DOMIterables","forEach","createNonEnumerableProperty","COLLECTION_NAME","Collection","CollectionPrototype","prototype","error","$forEach","arrayMethodIsStrict","STRICT_METHOD","module","exports","callbackfn","this","arguments","length","undefined","render","_vm","_h","$createElement","_c","_self","attrs","ordered","_e","staticClass","_l","table","tableIndex","key","table_id","dish","dishIndex","dish_id","_v","_s","image","name","on","$event","addOrDel","num","price","remarks","select","people_number","order_sn","addDishes","totalPrice","submitOrder","staticRenderFns","component","_m"],"mappings":"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","file":"js/chunk-6a473d50.dbea5634.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Nodata.vue?vue&type=style&index=0&lang=css&\"","var global = require('../internals/global');\nvar DOMIterables = require('../internals/dom-iterables');\nvar forEach = require('../internals/array-for-each');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\n\nfor (var COLLECTION_NAME in DOMIterables) {\n  var Collection = global[COLLECTION_NAME];\n  var CollectionPrototype = Collection && Collection.prototype;\n  // some Chrome versions have non-configurable methods on DOMTokenList\n  if (CollectionPrototype && CollectionPrototype.forEach !== forEach) try {\n    createNonEnumerableProperty(CollectionPrototype, 'forEach', forEach);\n  } catch (error) {\n    CollectionPrototype.forEach = forEach;\n  }\n}\n","'use strict';\nvar $forEach = require('../internals/array-iteration').forEach;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar STRICT_METHOD = arrayMethodIsStrict('forEach');\n\n// `Array.prototype.forEach` method implementation\n// https://tc39.es/ecma262/#sec-array.prototype.foreach\nmodule.exports = !STRICT_METHOD ? function forEach(callbackfn /* , thisArg */) {\n  return $forEach(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n// eslint-disable-next-line es/no-array-prototype-foreach -- safe\n} : [].forEach;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-scrollbar',{attrs:{\"wrap-class\":\"scrollWrap\",\"native\":false,\"id\":\"content\"}},[(!_vm.ordered.length)?_c('Nodata'):_vm._e(),(_vm.ordered.length)?_c('ul',{staticClass:\"orderBox\"},_vm._l((_vm.ordered),function(table,tableIndex){return _c('li',{key:table.table_id},[_c('table',[_c('tbody',_vm._l((table.order_items),function(dish,dishIndex){return _c('tr',{key:dish.dish_id},[_c('td',[_vm._v(_vm._s(dishIndex+1))]),_c('td',[_c('img',{attrs:{\"src\":'http://order-api.chenxuehui.com/'+dish.image,\"alt\":\"\"}})]),_c('td',[_vm._v(_vm._s(dish.name))]),_c('td',[_c('button',{on:{\"click\":function($event){return _vm.addOrDel(dish, -1, table.table_id)}}},[_c('span',{staticClass:\"iconfont\"},[_vm._v(\"\")])]),_c('span',{staticClass:\"num\"},[_vm._v(_vm._s(dish.num))]),_c('button',{on:{\"click\":function($event){return _vm.addOrDel(dish, 1, table.table_id)}}},[_c('span',{staticClass:\"iconfont\"},[_vm._v(\"\")])])]),_c('td',[_vm._v(\"￥\"+_vm._s(dish.price)+\" x \"+_vm._s(dish.num))]),_c('td',[_vm._v(_vm._s(dish.remarks))]),_c('td',[_c('button',{staticClass:\"select\",on:{\"click\":function($event){return _vm.select(dish, table.table_id)}}},[(dish.selected)?_c('span',{staticClass:\"iconfont\"},[_vm._v(\"\")]):_vm._e()])])])}),0)]),_c('div',{staticClass:\"foot\"},[_c('div',[_c('span',[_vm._v(\"桌号：\"),_c('strong',[_vm._v(_vm._s(table.table_id))]),_vm._v(\"号桌\")]),_c('span',[_vm._v(\"人数：\"+_vm._s(table.people_number))]),_c('span',[_vm._v(\"订单号：\"+_vm._s(table.order_sn))]),_c('button',{staticClass:\"addDishes\",on:{\"click\":function($event){return _vm.addDishes(table.table_id)}}},[_vm._v(\"添菜\")])]),_c('div',[_c('span',[_vm._v(\"总消费：￥\"),_c('strong',[_vm._v(_vm._s(_vm.totalPrice(tableIndex)))])]),_c('button',{staticClass:\"pay\",on:{\"click\":function($event){return _vm.submitOrder(table)}}},[_vm._v(\"下单\")])])])])}),0):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <el-scrollbar wrap-class=\"scrollWrap\"\r\n                  :native=\"false\"\r\n                  id=\"content\">\r\n        <Nodata v-if=\"!ordered.length\" />\r\n        <ul class=\"orderBox\"\r\n            v-if=\"ordered.length\">\r\n            <li v-for=\"(table,tableIndex) in ordered\"\r\n                :key=\"table.table_id\">\r\n                <table>\r\n                    <tbody>\r\n                        <tr v-for=\"(dish,dishIndex) in table.order_items\"\r\n                            :key=\"dish.dish_id\">\r\n                            <td>{{dishIndex+1}}</td>\r\n                            <td><img :src=\"'http://order-api.chenxuehui.com/'+dish.image\"\r\n                                     alt=\"\"></td>\r\n                            <td>{{dish.name}}</td>\r\n                            <td>\r\n                                <button @click=\"addOrDel(dish, -1, table.table_id)\"><span class=\"iconfont\">&#xe605;</span></button>\r\n                                <span class=\"num\">{{dish.num}}</span>\r\n                                <button @click=\"addOrDel(dish, 1, table.table_id)\"><span class=\"iconfont\">&#xe603;</span></button>\r\n                            </td>\r\n                            <td>￥{{dish.price}} x {{dish.num}}</td>\r\n                            <td>{{dish.remarks}}</td>\r\n                            <td>\r\n                                <button @click=\"select(dish, table.table_id)\"\r\n                                        class=\"select\">\r\n                                    <span v-if=\"dish.selected\"\r\n                                          class=\"iconfont\">&#xe641;</span>\r\n                                </button>\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n                <div class=\"foot\">\r\n                    <div>\r\n                        <span>桌号：<strong>{{table.table_id}}</strong>号桌</span>\r\n                        <span>人数：{{table.people_number}}</span>\r\n                        <span>订单号：{{table.order_sn}}</span>\r\n                        <button @click=\"addDishes(table.table_id)\"\r\n                                class=\"addDishes\">添菜</button>\r\n                    </div>\r\n                    <div>\r\n                        <span>总消费：￥<strong>{{totalPrice(tableIndex)}}</strong></span>\r\n                        <button @click=\"submitOrder(table)\"\r\n                                class=\"pay\">下单</button>\r\n                    </div>\r\n                </div>\r\n            </li>\r\n        </ul>\r\n    </el-scrollbar>\r\n</template>\r\n\r\n<script>\r\nimport Nodata from '../Nodata'\r\n\r\nexport default {\r\n    computed: {\r\n        ordered() {\r\n            return this.$store.getters.getOrdered\r\n        },\r\n        totalPrice() {\r\n            //计算总价\r\n            return function (tableIndex) {\r\n                let total = 0\r\n                this.ordered[tableIndex].order_items.forEach(\r\n                    (dish) => (total += dish.price * dish.num)\r\n                )\r\n\r\n                return total\r\n            }\r\n        },\r\n        curTableId() {\r\n            return this.$store.getters.getTables.cur_id\r\n        },\r\n    },\r\n    components: {\r\n        Nodata,\r\n    },\r\n    methods: {\r\n        addOrDel(dish, num, table_id) {\r\n            //加减菜\r\n            dish.num += num\r\n            dish.selected = true\r\n\r\n            if (dish.num <= 0) {\r\n                dish.num = 0\r\n                dish.selected = false\r\n            }\r\n\r\n            //点菜\r\n            this.orderDishes(dish, table_id)\r\n        },\r\n        orderDishes(dish, table_id) {\r\n            //这里请求后不需要再发获取已点数据的请求\r\n            this.$fetch({\r\n                url: '/api/add_order_item',\r\n                method: 'POST',\r\n                data: {\r\n                    table_id,\r\n                    dish_id: dish.dish_id,\r\n                    num: dish.num,\r\n                    remarks: dish.remarks,\r\n                    selected: dish.selected,\r\n                },\r\n            })\r\n        },\r\n        select(dish, table_id) {\r\n            dish.selected = !dish.selected\r\n\r\n            //点菜\r\n            this.orderDishes(dish, table_id)\r\n        },\r\n        addDishes(table_id) {\r\n            //添菜\r\n            if (table_id != this.curTableId) {\r\n                //当前点的桌子id与当前桌子id不一致\r\n                this.$fetch({\r\n                    url: '/api/choose_table',\r\n                    method: 'POST',\r\n                    data: {\r\n                        table_id,\r\n                    },\r\n                }).then(() => this.$store.commit('updateCurId', table_id))\r\n            }\r\n\r\n            this.$router.push('/')\r\n        },\r\n        submitOrder(table) {\r\n            //下单\r\n            this.$fetch({\r\n                url: '/api/submit_order',\r\n                method: 'POST',\r\n                data: {\r\n                    order_id: table.order_id,\r\n                },\r\n            }).then(() => {\r\n                // this.$store.commit('updateCurId',table_id)\r\n                this.$getOrdered() //获取到已点的数据\r\n                this.$getShopped() //获取到已下单的数据\r\n\r\n                //如果下单的桌号与当前桌子的id一样，就删除当前桌子的id\r\n                if (table.table_id == this.curTableId) {\r\n                    this.$store.getters.getTables.cur_id = 0\r\n                }\r\n            })\r\n        },\r\n    },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.addDishes {\r\n    width: 50px;\r\n    height: 25px;\r\n    background: #a65335;\r\n    border-radius: 5px;\r\n    border: none;\r\n}\r\n.pay {\r\n    width: 80px;\r\n    height: 35px;\r\n    background: #ff8400;\r\n    font-style: 18px;\r\n    border: none;\r\n    border-radius: 5px;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Ordered.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Ordered.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Ordered.vue?vue&type=template&id=46da5348&scoped=true&\"\nimport script from \"./Ordered.vue?vue&type=script&lang=js&\"\nexport * from \"./Ordered.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Ordered.vue?vue&type=style&index=0&id=46da5348&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"46da5348\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"nodata\"},[_c('span',{staticClass:\"iconfont\"},[_vm._v(\"\")]),_c('span',[_vm._v(\"暂无数据...\")])])}]\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"nodata\">\r\n        <span class=\"iconfont\">&#xe613;</span>\r\n        <span>暂无数据...</span>\r\n    </div>\r\n</template>\r\n<script>\r\nexport default {}\r\n</script>\r\n<style>\r\n.nodata {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    flex-direction: column;\r\n    margin-top: 100px;\r\n\r\n    font-size: 20px;\r\n    color: #fff;\r\n}\r\n.nodata span.iconfont {\r\n    font-size: 200px;\r\n    color: #ffc107;\r\n    margin-bottom: 20px;\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Nodata.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Nodata.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Nodata.vue?vue&type=template&id=91716a00&\"\nimport script from \"./Nodata.vue?vue&type=script&lang=js&\"\nexport * from \"./Nodata.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Nodata.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Ordered.vue?vue&type=style&index=0&id=46da5348&scoped=true&lang=css&\""],"sourceRoot":""}