(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1d5884ec"],{"7a43":function(e,t,s){},a230:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e._l(e.backDishes,(function(t){return s("div",{key:t.category.id,staticClass:"box"},[s("h3",[e._v(e._s(t.category.name))]),s("ul",[e._l(t.lists,(function(t){return s("li",{key:t.dish_id},[s("img",{attrs:{src:"http://order-api.chenxuehui.com/"+t.image,alt:""}}),s("div",{staticClass:"bottom"},[s("span",{staticClass:"name"},[e._v(e._s(t.name))]),s("span",{staticClass:"price"},[e._v("￥"),s("strong",[e._v(e._s(t.price))]),e._v("/份")])]),t.recommend?s("span",{staticClass:"iconfont recommend"},[e._v("")]):e._e(),s("div",{staticClass:"edit"},[s("span",{staticClass:"iconfont",on:{click:function(s){return e.del(t.dish_id)}}},[e._v("")]),s("span",{staticClass:"iconfont",on:{click:function(s){return e.showDialog(t)}}},[e._v("")])])])})),s("li",{staticClass:"add",on:{click:function(s){return e.showDialog({category_id:t.category.id})}}},[s("span",{staticClass:"iconfont"},[e._v("")])])],2)])})),s("Edit",{attrs:{dialogVisible:e.show,curDish:e.curDish},on:{closeDialog:e.close,changeImage:e.changeImage}})],2)},a=[],c=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-dialog",{attrs:{title:"菜品信息",visible:e.dialogVisible,top:"15vh","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[s("el-form",{ref:"form",attrs:{model:e.curDish,rules:e.rules,"label-width":"auto"}},[s("el-form-item",{attrs:{label:"菜名",prop:"name"}},[s("el-input",{model:{value:e.curDish.name,callback:function(t){e.$set(e.curDish,"name",t)},expression:"curDish.name"}})],1),s("el-form-item",{attrs:{label:"价格",prop:"price"}},[s("el-input",{model:{value:e.curDish.price,callback:function(t){e.$set(e.curDish,"price",e._n(t))},expression:"curDish.price"}})],1),s("el-form-item",{attrs:{label:"简介",prop:"desc"}},[s("el-input",{attrs:{type:"textarea",rows:"5"},model:{value:e.curDish.desc,callback:function(t){e.$set(e.curDish,"desc",t)},expression:"curDish.desc"}})],1),s("el-form-item",{attrs:{label:"推荐指数"}},[s("el-rate",{staticClass:"el-rate",model:{value:e.curDish.stars,callback:function(t){e.$set(e.curDish,"stars",t)},expression:"curDish.stars"}})],1),s("el-form-item",{attrs:{label:"是否推荐"}},[s("el-switch",{attrs:{"active-color":"#ff8400","inactive-color":"#ccc"},model:{value:e.curDish.recommend,callback:function(t){e.$set(e.curDish,"recommend",t)},expression:"curDish.recommend"}},[e._v(">")])],1),s("el-form-item",{attrs:{label:"图片"}},[s("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://order-api.chenxuehui.com/auth/upload_img","show-file-list":!1,"on-success":e.uploadSuccess,"before-upload":e.beforeUpload,name:"image"}},[e.curDish.image?s("img",{staticClass:"avatar",attrs:{src:"http://order-api.chenxuehui.com/"+e.curDish.image}}):s("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")])],1)],1)},r=[],o={data:function(){return{rules:{name:[{required:!0,message:"请输入菜名",trigger:"blur"}],price:[{required:!0,message:"请输入价格",type:"number",trigger:"blur"}],desc:[{required:!0,message:"请输入简介",trigger:"blur"}]}}},props:{dialogVisible:Boolean,curDish:Object},methods:{handleClose:function(){this.$emit("closeDialog"),this.$refs["form"].resetFields()},uploadSuccess:function(e){this.$emit("changeImage",e.url)},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type,s=e.size/1024/1024<1;return t||this.$message.error("上传头像图片只能是 JPG 或者 PNG 格式!"),s||this.$message.error("上传头像图片大小不能超过 1MB!"),t&&s},submitForm:function(){var e=this;this.$refs["form"].validate().then((function(){e.$fetch({url:"/api/edit_dish",method:"POST",data:e.curDish}).then((function(){return e.handleClose()}))})).catch((function(){}))}}},n=o,l=(s("fb1e"),s("2877")),u=Object(l["a"])(n,c,r,!1,null,null,null),h=u.exports,d={data:function(){return{backDishes:[],show:!1,curDish:{}}},mounted:function(){this.getBackDish()},methods:{getBackDish:function(){var e=this;this.$fetch({url:"/api/backend_dish_lists"}).then((function(t){return e.backDishes=t.data}))},del:function(e){var t=this;this.$confirm("你确定要删除吗？").then((function(){t.$fetch({url:"/api/del_dish",method:"POST",data:{dish_id:e}}).then((function(){return t.close()}))})).catch((function(){}))},close:function(){this.getBackDish(),this.show=!1},showDialog:function(e){this.show=!0,this.curDish=e},changeImage:function(e){this.$set(this.curDish,"image",e)}},components:{Edit:h}},m=d,f=(s("c9e6"),Object(l["a"])(m,i,a,!1,null,null,null));t["default"]=f.exports},c9e6:function(e,t,s){"use strict";s("d383")},d383:function(e,t,s){},fb1e:function(e,t,s){"use strict";s("7a43")}}]);
//# sourceMappingURL=chunk-1d5884ec.40d28d93.js.map