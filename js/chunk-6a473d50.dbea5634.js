(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6a473d50"],{"0365":function(t,e,r){"use strict";r("b925")},"159b":function(t,e,r){var n=r("da84"),s=r("fdbc"),i=r("17c2"),a=r("9112");for(var c in s){var o=n[c],d=o&&o.prototype;if(d&&d.forEach!==i)try{a(d,"forEach",i)}catch(u){d.forEach=i}}},"17c2":function(t,e,r){"use strict";var n=r("b727").forEach,s=r("a640"),i=s("forEach");t.exports=i?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},"263c":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-scrollbar",{attrs:{"wrap-class":"scrollWrap",native:!1,id:"content"}},[t.ordered.length?t._e():r("Nodata"),t.ordered.length?r("ul",{staticClass:"orderBox"},t._l(t.ordered,(function(e,n){return r("li",{key:e.table_id},[r("table",[r("tbody",t._l(e.order_items,(function(n,s){return r("tr",{key:n.dish_id},[r("td",[t._v(t._s(s+1))]),r("td",[r("img",{attrs:{src:"http://order-api.chenxuehui.com/"+n.image,alt:""}})]),r("td",[t._v(t._s(n.name))]),r("td",[r("button",{on:{click:function(r){return t.addOrDel(n,-1,e.table_id)}}},[r("span",{staticClass:"iconfont"},[t._v("")])]),r("span",{staticClass:"num"},[t._v(t._s(n.num))]),r("button",{on:{click:function(r){return t.addOrDel(n,1,e.table_id)}}},[r("span",{staticClass:"iconfont"},[t._v("")])])]),r("td",[t._v("￥"+t._s(n.price)+" x "+t._s(n.num))]),r("td",[t._v(t._s(n.remarks))]),r("td",[r("button",{staticClass:"select",on:{click:function(r){return t.select(n,e.table_id)}}},[n.selected?r("span",{staticClass:"iconfont"},[t._v("")]):t._e()])])])})),0)]),r("div",{staticClass:"foot"},[r("div",[r("span",[t._v("桌号："),r("strong",[t._v(t._s(e.table_id))]),t._v("号桌")]),r("span",[t._v("人数："+t._s(e.people_number))]),r("span",[t._v("订单号："+t._s(e.order_sn))]),r("button",{staticClass:"addDishes",on:{click:function(r){return t.addDishes(e.table_id)}}},[t._v("添菜")])]),r("div",[r("span",[t._v("总消费：￥"),r("strong",[t._v(t._s(t.totalPrice(n)))])]),r("button",{staticClass:"pay",on:{click:function(r){return t.submitOrder(e)}}},[t._v("下单")])])])])})),0):t._e()],1)},s=[],i=(r("159b"),r("44f5")),a={computed:{ordered:function(){return this.$store.getters.getOrdered},totalPrice:function(){return function(t){var e=0;return this.ordered[t].order_items.forEach((function(t){return e+=t.price*t.num})),e}},curTableId:function(){return this.$store.getters.getTables.cur_id}},components:{Nodata:i["a"]},methods:{addOrDel:function(t,e,r){t.num+=e,t.selected=!0,t.num<=0&&(t.num=0,t.selected=!1),this.orderDishes(t,r)},orderDishes:function(t,e){this.$fetch({url:"/api/add_order_item",method:"POST",data:{table_id:e,dish_id:t.dish_id,num:t.num,remarks:t.remarks,selected:t.selected}})},select:function(t,e){t.selected=!t.selected,this.orderDishes(t,e)},addDishes:function(t){var e=this;t!=this.curTableId&&this.$fetch({url:"/api/choose_table",method:"POST",data:{table_id:t}}).then((function(){return e.$store.commit("updateCurId",t)})),this.$router.push("/")},submitOrder:function(t){var e=this;this.$fetch({url:"/api/submit_order",method:"POST",data:{order_id:t.order_id}}).then((function(){e.$getOrdered(),e.$getShopped(),t.table_id==e.curTableId&&(e.$store.getters.getTables.cur_id=0)}))}}},c=a,o=(r("720a"),r("2877")),d=Object(o["a"])(c,n,s,!1,null,"46da5348",null);e["default"]=d.exports},"44f5":function(t,e,r){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},s=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"nodata"},[r("span",{staticClass:"iconfont"},[t._v("")]),r("span",[t._v("暂无数据...")])])}],i={},a=i,c=(r("0365"),r("2877")),o=Object(c["a"])(a,n,s,!1,null,null,null);e["a"]=o.exports},5674:function(t,e,r){},"720a":function(t,e,r){"use strict";r("5674")},b925:function(t,e,r){}}]);
//# sourceMappingURL=chunk-6a473d50.dbea5634.js.map