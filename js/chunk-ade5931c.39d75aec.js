(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ade5931c"],{2726:function(t,e,s){},3746:function(t,e,s){"use strict";s("2726")},5531:function(t,e,s){},"6b3e":function(t,e,s){"use strict";s("5531")},c70e:function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("dl",{staticClass:"table"},[s("dt",[t._v("桌台数据")]),s("dd",[s("div",[s("strong",[t._v(t._s(t.tables.length))]),s("span",[t._v("开桌数")])])]),s("dd",[s("div",[s("strong",[t._v(t._s(t.freeNum))]),s("span",[t._v("空闲数")])])]),s("dd",[s("div",[s("strong",[t._v(t._s(t.orderingNum))]),s("span",[t._v("点餐数")])])]),s("dd",[s("div",[s("strong",[t._v(t._s(t.eating.length))]),s("span",[t._v("下单数")])])])]),s("div",{staticClass:"list"},[s("h3",[t._v("桌台模式")]),s("ul",[t._l(t.tables,(function(e){return s("li",{key:e.table_id,class:{ordering:1==e.status,eating:2==e.status}},[s("div",[s("span",{staticClass:"iconfont"},[t._v("")]),t._v(t._s(e.table_id)+"号桌 "),2==e.status?s("button",{on:{click:function(s){return t.lookOrder(e.table_id)}}},[t._v("查看订单")]):t._e()]),s("p",[s("span",[t._v(t._s(t.statusText[e.status]))]),s("span",[t._v(t._s(e.people_number)+"人")])])])})),s("li",{staticClass:"add",on:{click:t.addTable}},[s("span",{staticClass:"iconfont"},[t._v("")])])],2)]),s("el-drawer",{attrs:{title:t.curTable.table_id+"号桌订单列表",visible:t.drawer,size:500,"custom-class":"myDrawer"},on:{"update:visible":function(e){t.drawer=e}}},[s("el-table",{attrs:{data:t.curTable.lists}},[s("el-table-column",{attrs:{prop:"name",label:"菜名",width:"200"}}),s("el-table-column",{attrs:{prop:"num",label:"数量",align:"center"}}),s("el-table-column",{attrs:{label:"是否上菜",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-switch",{attrs:{"active-color":"#ff8400","inactive-color":"#ccc",disabled:e.row.status},on:{change:function(s){return t.switchChange(e.row)}},model:{value:e.row.status,callback:function(s){t.$set(e.row,"status",s)},expression:"scope.row.status"}})]}}])})],1),s("div",{staticClass:"orderMessage"},[s("div",[s("p",[t._v("订单号："+t._s(t.curTable.order.order_sn))]),s("p",[t._v("下单时间："+t._s(t.curTable.order.created_at))]),s("p",[t._v("共消费："),s("strong",[t._v(t._s(t.curTable.order.amount))])])]),s("button",{on:{click:t.pay}},[t._v("结账")])])],1)],1)},n=[],a={data:function(){return{statusText:["空闲中","点餐中","用餐中"],drawer:!1,curTable:{lists:[],order:[]}}},mounted:function(){this.$getTable(),this.$getOrdered(),this.$getShopped()},computed:{tables:function(){return this.$store.getters.getTables.list},orderingNum:function(){return this.$store.getters.getOrdered.length},eating:function(){return this.$store.getters.getShopped},freeNum:function(){return this.tables.length-this.orderingNum-this.eating.length}},methods:{addTable:function(){var t=this;this.$fetch({url:"/api/inc_table_number",method:"POST"}).then((function(){return t.$getTable()}))},lookOrder:function(t){var e=this;this.drawer=!0,this.$fetch({url:"/api/table_order_item",data:{table_id:t}}).then((function(s){e.curTable=s,e.$set(e.curTable,"table_id",t)}))},switchChange:function(t){var e=this;this.$fetch({url:"/api/send_dish",method:"POST",data:{id:t.order_item_id}}).then((function(){return e.$alert("上菜成功")}))},pay:function(){var t=this;this.curTable.lists.some((function(t){return!t.status}))?this.$alert("请完成上菜"):this.$fetch({url:"/api/settle_order",method:"POST",data:{id:this.curTable.order.order_id}}).then((function(){t.drawer=!1,t.$getTable(),t.$getShopped()}))}}},i=a,l=(s("6b3e"),s("3746"),s("2877")),o=Object(l["a"])(i,r,n,!1,null,"69c826b5",null);e["default"]=o.exports}}]);
//# sourceMappingURL=chunk-ade5931c.39d75aec.js.map