(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2373d05e"],{"0365":function(t,s,e){"use strict";e("b925")},"0f66":function(t,s,e){},"160a":function(t,s,e){"use strict";e("99d2")},"31f4":function(t,s,e){},"354b":function(t,s,e){"use strict";e("b0d5")},3799:function(t,s,e){"use strict";e("31f4")},"44f5":function(t,s,e){"use strict";var o=function(){var t=this,s=t.$createElement;t._self._c;return t._m(0)},i=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"nodata"},[e("span",{staticClass:"iconfont"},[t._v("")]),e("span",[t._v("暂无数据...")])])}],n={},r=n,a=(e("0365"),e("2877")),c=Object(a["a"])(r,o,i,!1,null,null,null);s["a"]=c.exports},"4a8c":function(t,s,e){"use strict";e("5d75")},"4de9":function(t,s,e){"use strict";e("7efe")},"5d75":function(t,s,e){},"7db0":function(t,s,e){"use strict";var o=e("23e7"),i=e("b727").find,n=e("44d2"),r="find",a=!0;r in[]&&Array(1)[r]((function(){a=!1})),o({target:"Array",proto:!0,forced:a},{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(r)},"7efe":function(t,s,e){},9565:function(t,s,e){"use strict";e("0f66")},"99d2":function(t,s,e){},b0d5:function(t,s,e){},b925:function(t,s,e){},c40d:function(t,s,e){"use strict";e.r(s);var o=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("div",{attrs:{id:"navBar"}},[e("Nav"),e("Search")],1),e("el-scrollbar",{attrs:{"wrap-class":"scrollWrap",native:!1,id:"content"}},[e("FoodList")],1)],1)},i=[],n=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ul",{staticClass:"navWrap"},[e("li",{class:{active:0==t.cur},on:{click:function(s){return t.showFood()}}},[e("span",{staticClass:"iconfont"},[t._v("")]),e("span",{staticClass:"text"},[t._v("推荐")])]),t._l(t.navs,(function(s,o){return e("li",{key:s.id,class:{active:o+1==t.cur},on:{click:function(e){return t.showFood(o+1,s.id)}}},[e("span",{staticClass:"iconfont",domProps:{innerHTML:t._s(s.icon)}}),e("span",{staticClass:"text"},[t._v(t._s(s.name))])])}))],2)},r=[],a={data:function(){return{cur:0}},mounted:function(){this.$getCategory(),this.showFood()},computed:{navs:function(){return this.$store.getters.getCategory}},methods:{showFood:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.cur=t,this.getFood({category_id:s})},getFood:function(t){var s=this;this.$fetch({url:"/api/dish_lists",data:t}).then((function(e){s.$set(e,"curCategoryId",t?t.category_id:0),s.$store.commit("updateFoodList",e)}))}}},c=a,d=(e("9565"),e("2877")),u=Object(d["a"])(c,n,r,!1,null,"8a328bd8",null),l=u.exports,f=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"search"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.keywords,expression:"keywords"}],attrs:{type:"text"},domProps:{value:t.keywords},on:{keyup:function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"enter",13,s.key,"Enter")?null:t.search.apply(null,arguments)},input:function(s){s.target.composing||(t.keywords=s.target.value)}}}),e("button",{on:{click:t.search}},[e("span",{staticClass:"iconfont"},[t._v("")])])])},h=[],p={data:function(){return{keywords:""}},computed:{categoryId:function(){return this.$store.getters.getFoodList.curCategoryId}},methods:{search:function(){var t=this;this.$fetch({url:"/api/dish_lists",data:{keywords:this.keywords,category_id:this.categoryId}}).then((function(s){t.$store.commit("updateFoodList",s),t.keywords=""}))}}},v=p,_=(e("3799"),Object(d["a"])(v,f,h,!1,null,"1a84bb22",null)),m=_.exports,b=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[t.foodList.length?t._e():e("Nodata"),e("ul",{staticClass:"foodList"},t._l(t.foodList,(function(s){return e("li",{key:s.dish_id},[e("img",{attrs:{src:"http://order-api.chenxuehui.com/"+s.image,alt:""},on:{click:function(e){return t.showDetail(s)}}}),s.recommend?e("span",{staticClass:"iconfont recommend"},[t._v("")]):t._e(),e("div",{staticClass:"bar"},[e("h3",[t._v(t._s(s.name))]),e("p",[e("span",{staticClass:"rmb"},[t._v("RMB")]),e("span",{staticClass:"price"},[t._v(t._s(s.price)+"/份")]),e("button",{on:{click:function(e){return t.showFoodAttr(s)}}},[e("span",{staticClass:"iconfont"},[t._v("")])])])])])})),0),t.detailedShow?e("Detailed",{attrs:{food:t.curFood},on:{closeDetailed:function(s){t.detailedShow=!1}}}):t._e(),e("el-dialog",{attrs:{title:t.curFood.name,visible:t.dialogVisible,"modal-append-to-body":!1,width:"30%",top:"30vh","custom-class":"attrDialog"},on:{"update:visible":function(s){t.dialogVisible=s}}},[e("div",{staticClass:"dishHead"},[e("div",{staticClass:"title"},[e("p",{staticClass:"price"},[t._v("￥"),e("strong",[t._v(t._s(t.curFood.price))])]),e("p",{staticClass:"star"},[e("el-rate",{attrs:{disabled:"","text-color":"#ff9900"},model:{value:t.curFood.stars,callback:function(s){t.$set(t.curFood,"stars",s)},expression:"curFood.stars"}})],1)]),e("div",{staticClass:"control"},[e("button",{on:{click:function(s){return t.addOrDel(-1)}}},[e("span",{staticClass:"iconfont"},[t._v("")])]),e("span",[t._v(t._s(t.curFood.num))]),e("button",{on:{click:function(s){return t.addOrDel(1)}}},[e("span",{staticClass:"iconfont"},[t._v("")])])])]),e("el-input",{attrs:{type:"textarea",rows:"8",placeholder:"请输入备注"},model:{value:t.curFood.remarks,callback:function(s){t.$set(t.curFood,"remarks",s)},expression:"curFood.remarks"}}),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(s){t.dialogVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v("确 定")])],1)],1)],1)},g=[],F=(e("7db0"),function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"detailed"}},[e("div",{staticClass:"con"},[e("img",{attrs:{src:"http://order-api.chenxuehui.com/"+t.food.image,alt:""}}),e("div",{staticClass:"text"},[e("h2",[t._v(t._s(t.food.name))]),e("p",{staticClass:"intro"},[t._v(" "+t._s(t.food.desc)+" ")]),e("p",{staticClass:"recommend"},[e("strong",[t._v("推荐指数：")]),e("el-rate",{attrs:{disabled:"","text-color":"#ff9900"},model:{value:t.food.stars,callback:function(s){t.$set(t.food,"stars",s)},expression:"food.stars"}})],1),e("p",{staticClass:"price"},[e("span",[t._v("价格：")]),e("span",[t._v("RMB")]),e("span",[t._v(t._s(t.food.price))])])]),e("div",{staticClass:"close",on:{click:function(s){return t.$emit("closeDetailed")}}},[e("span",{staticClass:"iconfont"},[t._v("")])])])])}),k=[],C={props:{food:Object}},y=C,w=(e("160a"),e("354b"),Object(d["a"])(y,F,k,!1,null,"0ded92a5",null)),$=w.exports,x=e("44f5"),O={data:function(){return{detailedShow:!1,curFood:{},dialogVisible:!1}},components:{Detailed:$,Nodata:x["a"]},computed:{foodList:function(){return this.$store.getters.getFoodList.lists.docs},tableId:function(){return this.$store.getters.getTables.cur_id},ordered:function(){return this.$store.getters.getOrdered}},methods:{showDetail:function(t){this.detailedShow=!0,this.curFood=t},showFoodAttr:function(t){var s=this;if(this.tableId){this.dialogVisible=!0,this.curFood=t,this.$set(this.curFood,"num",1);var e=this.ordered.find((function(t){return t.table_id==s.tableId})),o=e&&e.order_items.find((function(s){return s.dish_id==t.dish_id}));o&&(this.curFood=o,this.$set(this.curFood,"stars",t.stars))}else this.$alert("请选择座位").then((function(){return s.$router.push("/table")})).catch((function(){}))},addOrDel:function(t){this.curFood.num+=t,this.curFood.num<=0&&(this.curFood.num=0)},confirm:function(){var t=this;this.curFood.num?(this.dialogVisible=!1,this.$fetch({url:"/api/add_order_item",method:"POST",data:{table_id:this.tableId,dish_id:this.curFood.dish_id,num:this.curFood.num,remarks:this.curFood.remarks,selected:!0}}).then((function(){return t.$getOrdered()}))):alert("数量不能为0")}}},L=O,D=(e("4de9"),e("4a8c"),Object(d["a"])(L,b,g,!1,null,"092ad7f6",null)),E=D.exports,I={components:{Nav:l,Search:m,FoodList:E}},j=I,S=Object(d["a"])(j,o,i,!1,null,null,null);s["default"]=S.exports}}]);
//# sourceMappingURL=chunk-2373d05e.b54e407c.js.map